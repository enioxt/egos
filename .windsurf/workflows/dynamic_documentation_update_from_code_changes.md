---
# DO NOT EDIT FRONTMATTER DESCRIPTION LENGTH > 250 CHARS
# Keep whole workflow < 12 000 chars (current ~8 k)
# Version 2.0 – “Living Docs” – 2025-06-13

description: Automates the synchronization of documentation with code modifications using AI to analyze changes and draft updates, ensuring documentation accuracy
categories: [documentation, devops, automation]
requires: [ATRiAN]
---

# DYNAMIC DOCUMENTATION UPDATE FROM CODE CHANGES WORKFLOW (EGOS × WINDSURF)

> “Docs that evolve with every commit.”

Invoke with `/dynamic_documentation_update_from_code_changes`.

---
## TABLE OF CONTENTS
1. Prerequisites & Hooks  
2. Phase 1 – Detect Changes  
3. Phase 2 – Generate Draft Docs  
4. Phase 3 – Human Review  
5. Phase 4 – Publish & Verify  
6. Annex – Commit-Msg Template  

---
## 1. PREREQUISITES & HOOKS // turbo
| ✔ | Item | Command |
|---|------|---------|
|   | Git hook script installed | `test -f .git/hooks/post-commit` |
|   | `ai-doc-gen` CLI | `pip show ai-doc-gen` |
|   | MkDocs site present | `dir docs/` |

Abort if any check fails.

---
## 2. PHASE 1 – DETECT CHANGES
### 1.1 Post-Commit Hook // turbo
Hook runs:
```bash
git diff --name-status HEAD~1..HEAD > .tmp/diff.txt
```
### 1.2 Classify Files
Label as `code`, `doc`, `config` via extension map.

---
## 3. PHASE 2 – GENERATE DRAFT DOCS
### 2.1 AI Summary // turbo
```bash
ai-doc-gen summarize --diff .tmp/diff.txt --out .tmp/summary.md
```

### 2.2 Insert into Target Docs
Map code path → doc path; open PR with added section.

### 2.3 Diagram Auto-Sync
If PlantUML detected, regenerate PNGs.

---
## 4. PHASE 3 – HUMAN REVIEW
* Reviewer checks technical accuracy & tone.
* If summary >300 words, split into subsections.
* Use `/atrian_ethics_evaluation` for sensitive docs.

---
## 5. PHASE 4 – PUBLISH & VERIFY
### 4.1 Build Site // turbo
```bash
mkdocs build --strict
```
Fail if broken links.

### 4.2 Merge & Deploy
Push to `main`; Netlify build triggers.

### 4.3 Post-Deploy Crawl
`linkinator https://docs.egos.ai` for 404s.

---
## ANNEX – COMMIT-MSG TEMPLATE
```
<type>(scope): <subject>

# Doc-Impact: <y/n>
# Doc-Summary: <one-line>
# Related-Issue: #123
```

---
### WORKFLOW META
* `// turbo` denotes safe auto-runs; obey RULE-OPS-CHECKLIST-001.  
* Keep file <12 k chars; update version header on edits.

---
## Cross-References & Related Workflows

- /iterative_code_refinement_cycle – Often invoked alongside to document successive code improvements.
- /atrian_ethics_evaluation – Updates docs when evaluation thresholds or reports change.
- /atrian_roi_calc – Publishes ROI report markdowns generated by the workflow.
- /project_handover_procedure – Ensures documentation is current before handover.

*EOF*